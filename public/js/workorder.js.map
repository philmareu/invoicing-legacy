{"version":3,"sources":["workorders.js","tasks.js","time.js","notes.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"workorder.js","sourcesContent":["$(function(){\r\n    \r\n    // Mark workorders complete\r\n\t$('a.workorder-completed').on('click', function( e ) {\r\n\t    \r\n\t    e.preventDefault();\r\n\t    \r\n        if (confirm(\"Are you sure you want to complete this work order?\"))\r\n        {\r\n\t\t\tvar $this = $( this );\r\n            var workorderId = $this.attr('id');\r\n\t\t\t\r\n\t\t\t$this.html('Marking complete <i class=\"uk-icon-refresh uk-icon-spin\"></i>').prop('disabled', true);\r\n            \r\n            $.ajax({\r\n                type: \"GET\",\r\n                url: SITE_URL + \"/workorders/mark_completed/\" + workorderId\r\n            })\r\n            .done(function( data ) {\r\n            \r\n                var status = $.parseJSON(data).status;\r\n                var html = $.parseJSON(data).html;\r\n            \r\n                if(status == 'success')\r\n                {\r\n                    $('a.workorder-completed').remove();\r\n                    $('a.toggle-time').remove();\r\n                    $('div.status').html( html );\r\n                    $('div.status').attr('class', 'uk-alert uk-alert-danger');\r\n                }\r\n\t\t\t\t\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\talert('An error occurred. Please make sure you have completed all tasks.');\r\n\t\t\t\t\t$this.html('<i class=\"uk-icon-check\"></i> Mark Completed');\r\n\t\t\t\t}\r\n            \r\n            })\r\n        }\r\n\r\n\t});\r\n\t\r\n});\r\n","$(function(){\r\n\r\n    // Add task Modal\r\n\t$('a#add-task').on('click', function(e){\r\n        id = $( this ).attr('data-invoicing-work-order-id');\r\n        uri = \"/tasks/create/\" + id;\r\n\r\n        getModal(uri);\r\n\r\n\t});\r\n    \r\n    // Save task\r\n\t$('#modal').on(\"click\", 'button#save-task', function( event ) {\r\n\t    \r\n\t    event.preventDefault();\r\n\t\tbutton = $( this );\r\n\t\tbutton.html('Saving <i class=\"uk-icon-refresh uk-icon-spin\"></i>').prop('disabled', true);\r\n\t    \r\n        var modal = $.UIkit.modal(\"#modal\");\r\n\t    \r\n\t    uri = \"/tasks\";\r\n\t    data = $(\"form#add-task\").serialize();\r\n        \r\n        $.ajax({\r\n    \t\ttype: \"POST\",\r\n    \t\turl: SITE_URL + uri,\r\n    \t\tdata: data\r\n    \t})\r\n    \t.done( function( response ) {\r\n\r\n            if(response.status == 'saved')\r\n    \t\t{\r\n\t\t\t\tif ($('.uncompleted-tasks tr.task').length == 0) {\r\n    \t\t        table = '<div class=\"uk-overflow-container\"><table class=\"uk-table uk-table-striped uk-table-condensed tasks uncompleted\"><caption class=\"uk-margin-bottom\">These are tasks assigned to this work order.</caption><tbody>' + results.html + '</tbody></table></div>';\r\n    \t\t        \r\n    \t\t        $('p.no-tasks').remove();\r\n    \t\t        $('.uncompleted-tasks').html( table );\r\n                }\r\n                \r\n                else {\r\n                    $('table.tasks tbody').append( response.html );\r\n                }\r\n\r\n    \t\t\tmodal._hide();\r\n    \t\t}\r\n\r\n    \t});\r\n\t\t\r\n\t});\r\n\r\n    // Edit task Modal\r\n\t$('.uncompleted-tasks, .completed-tasks').on('click', 'a.edit-task', function(){\r\n\t    \r\n        taskId = $( this ).attr('id');\r\n        uri = \"/tasks/\" + taskId + \"/edit\";\r\n        \r\n        getModal(uri);\r\n\t\t\r\n\t});\r\n\t\r\n\t// Update task\r\n\t$('#modal').on(\"click\", 'button#update-task', function( event ) {\r\n\t    \r\n\t    event.preventDefault();\r\n        var button = $( this );\r\n        var modal = $.UIkit.modal(\"#modal\");\r\n        var form = button.parents('form');\r\n        var action = form.attr('action');\r\n\r\n\t\tbutton.html('Updating <i class=\"uk-icon-refresh uk-icon-spin\"></i>').prop('disabled', true);\r\n\r\n        $.ajax({\r\n    \t\ttype: \"PUT\",\r\n    \t\turl: action,\r\n    \t\tdata: form.serialize()\r\n    \t})\r\n    \t.done( function( response ) {\r\n\r\n            if(response.status == 'saved')\r\n    \t\t{\r\n                $('table.tasks tr#row-' + response.task.id).replaceWith( response.html );\r\n\r\n    \t\t\tmodal._hide();\r\n    \t\t}\r\n\r\n    \t});\r\n\t\t\r\n\t});\r\n\r\n    // Delete task\r\n    $('.uncompleted-tasks, .completed-tasks').on('click', 'a.delete-task', function(event){\r\n        \r\n        event.preventDefault();\r\n\r\n        taskId = $( this ).attr('id');\r\n        \r\n        if (confirm(\"Are you sure?\"))\r\n\t\t{\r\n\t\t    $.ajax({\r\n                type: \"DELETE\",\r\n                url: SITE_URL + \"/tasks/\" + taskId,\r\n                data: {_token: csrf}\r\n            })\r\n            .done( function( response ) {\r\n\r\n                if(response.status == 'success')\r\n                {\r\n                    $('tr#row-' + taskId).remove();\r\n                }\t\t\t\r\n            })\r\n\t\t}\r\n\r\n    });\r\n\r\n    // Toggle task\r\n    $('.uncompleted-tasks, .completed-tasks').on('click', 'a.toggle-task', function( e ){\r\n\r\n        e.preventDefault();\r\n\r\n        var $taskId = $( this ).attr('id');\r\n\r\n        $.ajax({\r\n            type: \"GET\",\r\n            url: SITE_URL + \"/tasks/toggle/\" + $taskId\r\n        })\r\n        .done( function( response ) {\r\n\r\n            if(response == 'completed')\r\n            {\r\n                $('a#' + $taskId + '.toggle-task i').attr('class', 'uk-icon-check-square-o');\r\n                $('tr#row-' + $taskId).detach().appendTo($('table.tasks.completed tbody'));\r\n                \r\n                // alert($('table.tasks.completed tbody').html());\r\n                \r\n                // \r\n                \r\n            }\r\n            else\r\n            {\r\n                $('a#' + $taskId + '.toggle-task i').attr('class', 'uk-icon-square-o');\r\n                $('tr#row-' + $taskId).detach().appendTo($('table.tasks.uncompleted tbody'));\r\n            }\r\n\r\n        })\r\n\r\n    });\r\n\t\r\n\t// Add task Modal\t\r\n\t$('.uncompleted-tasks').on('click', 'a.add-to-workorder', function(e){\r\n\t\t\r\n\t\te.preventDefault();\r\n\t    \r\n\t    taskId = $(this).attr('id');\r\n\r\n        uri = \"/tasks/add-to-workorder/\" + taskId;\r\n        \r\n        getModal(uri);\r\n\t\t\r\n\t});\r\n    \r\n    // Move task\r\n\t// $('.uncompleted-tasks').on('click', 'a.move-task', function(e){\r\n\t//\r\n\t//     e.preventDefault();\r\n\t//\r\n\t// \tvar $this = $( this );\r\n\t// \tvar ids = $this.attr('id');\r\n\t// \tvar row = $this.parents(\"tr\");\r\n\t//\r\n\t// \t$.ajax({\r\n\t// \t\ttype: \"GET\",\r\n\t// \t\turl: SITE_URL + \"/workorders/move_task/\" + ids\r\n\t// \t})\r\n\t// \t.done(function( data ) {\r\n\t//\r\n\t// \t\tvar status = $.parseJSON(data).status;\r\n\t//\r\n\t// \t\tif(status == 'success')\r\n\t// \t\t{\r\n\t// \t\t\trow.remove();\r\n\t// \t\t}\r\n\t// \t\telse\r\n\t// \t\t{\r\n\t//\r\n\t// \t\t}\r\n\t//\r\n\t// \t})\r\n\t//\r\n\t// });\r\n\t\r\n\t// Add task to work order\r\n\t$('#modal').on(\"click\", 'button#add-to-workorder', function( e ) {\r\n\t    \r\n\t    e.preventDefault();\r\n\t\t\r\n\t\tbutton = $( this );\r\n\t\t\r\n\t\tbutton.html('Adding to Work Order <i class=\"uk-icon-refresh uk-icon-spin\"></i>').prop('disabled', true);\r\n\t    \r\n        var modal = $.UIkit.modal(\"#modal\");\r\n\t    \r\n\t    uri = \"/tasks/add-to-workorder\";\r\n\t    data = $(\"form#add-task-to-workorder\").serialize();\r\n        \r\n        $.ajax({\r\n    \t\ttype: \"POST\",\r\n    \t\turl: SITE_URL + uri,\r\n    \t\tdata: data\r\n    \t})\r\n    \t.done( function( data ) {\r\n\r\n            var results = $.parseJSON(data);\r\n\r\n            if(results.status == 'success')\r\n    \t\t{                \r\n    \t\t    $('tr#row-' + results.taskId).remove();\r\n\r\n    \t\t\tmodal._hide();\r\n    \t\t}\r\n\r\n    \t});\r\n\t\t\r\n\t});\r\n\r\n});","$(function(){\r\n    \r\n    \r\n    // Add Time Modal\r\n\t$('a#add-time').on('click', function(){\r\n\t    \r\n        workorderId = $( this ).attr('class');\r\n        uri = \"/times/create/\" + workorderId;\r\n        \r\n        getModal(uri);\r\n\t\t\r\n\t});\r\n    \r\n    // Save time\r\n\t$('#modal').on(\"click\", 'button#save-time', function( e ) {\r\n\t    \r\n\t    e.preventDefault();\r\n\t    \r\n\t\tbutton = $( this );\r\n\t\t\r\n\t\tbutton.html('Saving <i class=\"uk-icon-refresh uk-icon-spin\"></i>').prop('disabled', true);\r\n\t\t\r\n\t    var modal = $.UIkit.modal(\"#modal\");\r\n\t    \r\n\t    uri = \"/times\";\r\n\t    data = $(\"form#add-time\").serialize();\r\n        \r\n        $.ajax({\r\n    \t\ttype: \"POST\",\r\n    \t\turl: SITE_URL + uri,\r\n    \t\tdata: data\r\n    \t})\r\n    \t.done( function( data ) {\r\n\r\n            var results = $.parseJSON(data);\r\n\r\n            if(results.status == 'saved')\r\n    \t\t{\r\n    \t\t    if ($('tr.time').length == 0) {\r\n    \t\t        table = '<div class=\"uk-overflow-container\"><table class=\"uk-table uk-table-striped uk-table-condensed times uk-text-nowrap\"><thead><tr><th>Start</th><th>Stop</th><th>Total</th><th>&nbsp;</th></tr></thead><tbody>' + results.html + '</tbody></table></div>';\r\n    \t\t        \r\n    \t\t        \r\n    \t\t        $('.no-times').remove();\r\n    \t\t        $('.timesheet').after( table );\r\n                }\r\n                \r\n                else {\r\n                    $('table.times tbody').append( results.html );\r\n                }\r\n\r\n    \t\t\tmodal._hide();\r\n    \t\t}\r\n\r\n    \t});\r\n\t\t\r\n\t});\r\n\t\r\n    // Edit task Modal\r\n\t$('.timesheet').on('click', 'a.edit-time', function(){\r\n\t    \r\n        timeId = $( this ).attr('id');\r\n        uri = \"/times/\" + timeId + \"/edit\";\r\n\r\n        getModal(uri);\r\n\t\t\r\n\t});  \r\n\r\n\t\r\n\t// Update time\r\n\t$('#modal').on(\"click\", 'button#update-time', function( e ) {\r\n\r\n\t    e.preventDefault();\r\n\r\n\t\tbutton = $( this );\r\n\r\n\t\tbutton.html('Updating <i class=\"uk-icon-refresh uk-icon-spin\"></i>').prop('disabled', true);\r\n\r\n\t        var modal = $.UIkit.modal(\"#modal\");\r\n\r\n\t        timeId = $('input#time-id').val();\r\n\r\n\t    uri = SITE_URL + \"/times/\" + timeId;\r\n\t    data = $(\"form#edit-time\").serialize();\r\n\r\n\t        $.ajax({\r\n\t    \t\ttype: \"PATCH\",\r\n\t    \t\turl: uri,\r\n\t    \t\tdata: data\r\n\t    \t})\r\n\t    \t.done( function( data ) {\r\n\r\n\t            var results = $.parseJSON(data);\r\n\r\n\t            if(results.status == 'saved')\r\n\t    \t\t{\r\n\t    \t\t    var html = $.parseJSON(data).html;\r\n\r\n\t                $('table.times tr#row-' + timeId).replaceWith( html );\r\n\r\n\t    \t\t\tmodal._hide();\r\n\t    \t\t}\r\n\r\n\t    \t});\r\n\r\n\t});\r\n\t\r\n\t// Delete time\r\n    $('.timesheet').on('click', 'a.delete-time', function(e){\r\n\t\t\r\n\t\te.preventDefault();\r\n\r\n        time_id = $( this ).attr('id');\r\n\t\t\r\n        if (confirm(\"Are you sure?\"))\r\n\t\t{\r\n\t        $.ajax({\r\n\t            type: \"DELETE\",\r\n\t            url: SITE_URL + \"/times/\" + time_id\r\n\t        })\r\n\t        .done( function( data ) {\r\n\r\n\t            var status = $.parseJSON(data).status;\r\n\r\n\t            if(status == 'success')\r\n\t            {\r\n\t                var total_time = $.parseJSON(data).total_time;\r\n\t                var workorder_id = $.parseJSON(data).workorder_id;\r\n                    \r\n\t                $('span.total-time-' + workorder_id).html( total_time );\r\n\t                $('tr#row-' + time_id).remove();\r\n\t            }\t\t\t\r\n\t        })\r\n\t\t}\r\n\r\n    });\r\n    \r\n});","$(function(){\r\n    \r\n    // Add Note Modal\r\n\t$('a#add-note').on('click', function(e){\r\n\t    \r\n        resourceString = $( this ).attr('class');\r\n        uri = \"/notes/create/\" + resourceString;\r\n        \r\n        getModal(uri);\r\n\t\t\r\n\t});\r\n    \r\n    // Save note\r\n\t$('#modal').on(\"click\", 'button#save-note', function( e ) {\r\n\t    \r\n\t    e.preventDefault();\r\n\t\t\r\n\t\tbutton = $( this );\r\n\t\t\r\n\t\tbutton.html('Saving <i class=\"uk-icon-refresh uk-icon-spin\"></i>').prop('disabled', true);\r\n\t    \r\n\t    var modal = $.UIkit.modal(\"#modal\");\r\n\t    \r\n\t    uri = \"/notes\";\r\n\t    data = $(\"form#add-note\").serialize();\r\n        \r\n        $.ajax({\r\n    \t\ttype: \"POST\",\r\n    \t\turl: SITE_URL + uri,\r\n    \t\tdata: data\r\n    \t})\r\n    \t.done( function( data ) {\r\n\r\n            var results = $.parseJSON(data);\r\n\r\n            if(results.status == 'saved')\r\n    \t\t{\r\n                if ($('div.note').length == 0) {\r\n    \t\t        $('.no-notes').remove();\r\n    \t\t        $('div.notes').html( results.html );\r\n                }\r\n                \r\n                else {\r\n                    $('div.notes').append( results.html );\r\n                }\r\n\r\n    \t\t\tmodal._hide();\r\n    \t\t}\r\n\r\n    \t});\r\n\t\t\r\n\t});\r\n\t\r\n});"],"sourceRoot":"/source/"}